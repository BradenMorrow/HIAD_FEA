<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="96,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S2T73U3">y_out</span> = normcfast(<span class="var type1" id="S3T73U6">x</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="96,2" id="srcline2"> 2</a></span><span class="line"><span class="comment">%NORMC Normalize columns of matrices.</span></span></span>
<span class="srcline"><span class="lineno"><a href="96,3" id="srcline3"> 3</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="96,4" id="srcline4"> 4</a></span><span class="line"><span class="comment">%  &lt;a href="matlab:doc normc"&gt;normc&lt;/a&gt;(X) takes a single matrix or cell array of matrices and returns</span></span></span>
<span class="srcline"><span class="lineno"><a href="96,5" id="srcline5"> 5</a></span><span class="line"><span class="comment">%  the matrices with columns normalized to a length of one.</span></span></span>
<span class="srcline"><span class="lineno"><a href="96,6" id="srcline6"> 6</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="96,7" id="srcline7"> 7</a></span><span class="line"><span class="comment">%  Here the columns of a random matrix are normalized.</span></span></span>
<span class="srcline"><span class="lineno"><a href="96,8" id="srcline8"> 8</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="96,9" id="srcline9"> 9</a></span><span class="line"><span class="comment">%    x = &lt;a href="matlab:doc rands"&gt;rands&lt;/a&gt;(4,8);</span></span></span>
<span class="srcline"><span class="lineno"><a href="96,10" id="srcline10">10</a></span><span class="line"><span class="comment">%    y = &lt;a href="matlab:doc normc"&gt;normc&lt;/a&gt;(x)</span></span></span>
<span class="srcline"><span class="lineno"><a href="96,11" id="srcline11">11</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="96,12" id="srcline12">12</a></span><span class="line"><span class="comment">%  See also NORMR.</span></span></span>
<span class="srcline"><span class="lineno"><a href="96,13" id="srcline13">13</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="96,14" id="srcline14">14</a></span><span class="line"><span class="comment">% Copyright 1992-2015 The MathWorks, Inc.</span></span></span>
<span class="srcline"><span class="lineno"><a href="96,15" id="srcline15">15</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="96,16" id="srcline16">16</a></span><span class="line"><span class="keyword">if</span> nargin &lt; 1</span></span>
<span class="srcline"><span class="lineno"><a href="96,17" id="srcline17">17</a></span><span class="line">    error(message(<span class="string">'nnet:Args:NotEnough'</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="96,18" id="srcline18">18</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="96,19" id="srcline19">19</a></span><span class="line"><span class="mxinfo " id="T28:U3"><span class="var type1" id="S7T28U21">wasMatrix</span> = <span class="mxinfo " id="T28:U5">~iscell(<span class="var type1" id="S3T73U25">x</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="96,20" id="srcline20">20</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="96,21" id="srcline21">21</a></span><span class="line"><span class="comment">%make change here</span></span></span>
<span class="srcline"><span class="lineno"><a href="96,22" id="srcline22">22</a></span><span class="line"><span class="mxinfo " id="T99:U7"><span class="var type1" id="S3T99U28">x</span> = {<span class="var type1" id="S3T73U31">x</span>}</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="96,23" id="srcline23">23</a></span><span class="line"><span class="comment">%x = nntype.data('format',x,'Data');</span></span></span>
<span class="srcline"><span class="lineno"><a href="96,24" id="srcline24">24</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="96,25" id="srcline25">25</a></span><span class="line"><span class="var type1" id="S9T100U34">y</span> = cell(size(<span class="var type1" id="S3T99U39">x</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="96,26" id="srcline26">26</a></span><span class="line"><span class="keyword">for</span> <span class="var type1" id="S12T7U42">i</span>=<span class="mxinfo " id="T7:U13">1:numel(<span class="var type1" id="S3T99U47">x</span>)</span></span></span>
<span class="srcline"><span class="lineno"><a href="96,27" id="srcline27">27</a></span><span class="line">    <span class="mxinfo " id="T73:U15"><span class="var type1" id="S14T73U50">xi</span> = <span class="var type1" id="S3T99U52">x</span>{<span class="var type1" id="S12T7U53">i</span>}</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="96,28" id="srcline28">28</a></span><span class="line">    <span class="mxinfo " id="T101:U19"><span class="mxinfo " id="T101:U20"><span class="var type1" id="S14T73U57">xi</span>(<span class="mxinfo " id="T82:U22">~<span class="mxinfo " id="T82:U23">isfinite(<span class="var type1" id="S14T73U61">xi</span>)</span></span>)</span> = <span class="mxinfo " id="T7:U25">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="96,29" id="srcline29">29</a></span><span class="line">    <span class="mxinfo " id="T5:U26"><span class="var type1" id="S16T5U65">len</span> = <span class="mxinfo " id="T5:U28">sqrt(<span class="mxinfo " id="T5:U29">sum(<span class="mxinfo " id="T73:U30"><span class="var type1" id="S14T73U71">xi</span>.^2</span>,1)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="96,30" id="srcline30">30</a></span><span class="line">    <span class="mxinfo " id="T73:U32"><span class="var type1" id="S19T73U76">yi</span> = <span class="mxinfo " id="T73:U34">bsxfun(@rdivide,<span class="var type1" id="S14T73U81">xi</span>,<span class="var type1" id="S16T5U82">len</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="96,31" id="srcline31">31</a></span><span class="line">    <span class="mxinfo " id="T96:U37"><span class="var type1" id="S22T96U85">zeroColumns</span> = <span class="mxinfo " id="T96:U39">find(<span class="mxinfo " id="T88:U40"><span class="var type1" id="S16T5U89">len</span>==<span class="mxinfo " id="T7:U42">0</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="96,32" id="srcline32">32</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T28:U43">~<span class="mxinfo " id="T28:U44">isempty(<span class="var type1" id="S22T96U96">zeroColumns</span>)</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="96,33" id="srcline33">33</a></span><span class="line">        <span class="mxinfo " id="T7:U46"><span class="var type1" id="S25T7U99">numRows</span> = <span class="mxinfo " id="T7:U48">size(<span class="var type1" id="S14T73U102">xi</span>,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="96,34" id="srcline34">34</a></span><span class="line">        <span class="mxinfo " id="T72:U50"><span class="var type1" id="S26T72U106">row</span> = <span class="mxinfo " id="T72:U52">ones(<span class="var type1" id="S25T7U110">numRows</span>,1) ./ sqrt(<span class="var type1" id="S25T7U114">numRows</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="96,35" id="srcline35">35</a></span><span class="line">        <span class="mxinfo " id="T98:U55"><span class="mxinfo " id="T98:U56"><span class="var type1" id="S19T73U118">yi</span>(<span class="mxinfo " id="T102:U58">:</span>,<span class="var type1" id="S22T96U120">zeroColumns</span>)</span> = <span class="mxinfo " id="T98:U60">repmat(<span class="var type1" id="S26T72U123">row</span>,1,<span class="mxinfo " id="T7:U62">numel(<span class="var type1" id="S22T96U127">zeroColumns</span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="96,36" id="srcline36">36</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="96,37" id="srcline37">37</a></span><span class="line">    <span class="mxinfo " id="T73:U64"><span class="var type1" id="S9T100U131">y</span>{<span class="var type1" id="S12T7U132">i</span>} = <span class="var type1" id="S19T73U133">yi</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="96,38" id="srcline38">38</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="96,39" id="srcline39">39</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="96,40" id="srcline40">40</a></span><span class="line"><span class="keyword">if</span> <span class="var type1" id="S7T28U136">wasMatrix</span></span></span>
<span class="srcline"><span class="lineno"><a href="96,41" id="srcline41">41</a></span><span class="line">    <span class="mxinfo " id="T73:U69"><span class="var type1" id="S2T73U139">y_out</span> = <span class="var type1" id="S9T100U141">y</span>{<span class="mxinfo " id="T49:U72">1</span>}</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="96,42" id="srcline42">42</a></span><span class="line"><span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="96,43" id="srcline43">43</a></span><span class="line">    <span class="var type0" id="S2T0U146">y_out</span> = <span class="var type0" id="S9T0U147">y</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="96,44" id="srcline44">44</a></span><span class="line"><span class="keyword"><span class="keyword">end</span></span></span></span>
</pre>
