<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T1U3">EL</span>, <span class="var type1" id="S3T29U4">fint_i</span>, <span class="var type1" id="S4T29U5">Fint_i</span>, <span class="var type1" id="S5T29U6">dof_Fint</span>, <span class="var type1" id="S6T30U7">Kel</span>, <span class="var type1" id="S7T30U8">dof_i</span>, <span class="var type1" id="S8T30U9">dof_j</span>, <span class="var type1" id="S9T31U10">ROT</span>, <span class="var type1" id="S10T32U11">break_iter</span>] = assemble_prebody(<span class="var type1" id="S11T33U14">con</span>, <span class="var type1" id="S2T1U15">EL</span>, <span class="var type1" id="S12T34U16">U_input</span>, <span class="var type1" id="S13T28U17">par</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,2" id="srcline2"> 2</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,3" id="srcline3"> 3</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,4" id="srcline4"> 4</a></span><span class="line"><span class="comment">% Preallocate for parfor loop</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,5" id="srcline5"> 5</a></span><span class="line"><span class="mxinfo " id="T29:U14"><span class="var type1" id="S3T29U20">fint_i</span> = <span class="mxinfo " id="T29:U16">zeros(<span class="mxinfo " id="T7:U17">12</span>,<span class="mxinfo " id="T7:U18">size(<span class="var type1" id="S2T1U26">EL</span>,1)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,6" id="srcline6"> 6</a></span><span class="line"><span class="mxinfo " id="T29:U20"><span class="var type1" id="S4T29U30">Fint_i</span> = <span class="mxinfo " id="T29:U22">zeros(<span class="mxinfo " id="T7:U23">12</span>,<span class="mxinfo " id="T7:U24">size(<span class="var type1" id="S2T1U36">EL</span>,1)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,7" id="srcline7"> 7</a></span><span class="line"><span class="mxinfo " id="T32:U26"><span class="var type1" id="S10T32U40">break_iter</span> = <span class="mxinfo " id="T32:U28">zeros(<span class="mxinfo " id="T7:U29">size(<span class="var type1" id="S2T1U45">EL</span>,1)</span>,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,8" id="srcline8"> 8</a></span><span class="line"><span class="mxinfo " id="T30:U31"><span class="var type1" id="S7T30U50">dof_i</span> = <span class="mxinfo " id="T30:U33">zeros(<span class="mxinfo " id="T7:U34">144</span>,<span class="mxinfo " id="T7:U35">size(<span class="var type1" id="S2T1U56">EL</span>,1)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,9" id="srcline9"> 9</a></span><span class="line"><span class="mxinfo " id="T30:U37"><span class="var type1" id="S8T30U60">dof_j</span> = <span class="mxinfo " id="T30:U39">zeros(<span class="mxinfo " id="T7:U40">144</span>,<span class="mxinfo " id="T7:U41">size(<span class="var type1" id="S2T1U66">EL</span>,1)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,10" id="srcline10">10</a></span><span class="line"><span class="mxinfo " id="T30:U43"><span class="var type1" id="S6T30U70">Kel</span> = <span class="mxinfo " id="T30:U45">zeros(<span class="mxinfo " id="T7:U46">144</span>,<span class="mxinfo " id="T7:U47">size(<span class="var type1" id="S2T1U76">EL</span>,1)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,11" id="srcline11">11</a></span><span class="line"><span class="mxinfo " id="T29:U49"><span class="var type1" id="S5T29U80">dof_Fint</span> = <span class="mxinfo " id="T29:U51">zeros(<span class="mxinfo " id="T7:U52">12</span>, <span class="mxinfo " id="T7:U53">size(<span class="var type1" id="S2T1U86">EL</span>,1)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,12" id="srcline12">12</a></span><span class="line"><span class="mxinfo " id="T31:U55"><span class="var type1" id="S9T31U90">ROT</span> = <span class="mxinfo " id="T31:U57">zeros(<span class="mxinfo " id="T7:U58">size(<span class="var type1" id="S2T1U95">EL</span>,1)</span>,<span class="mxinfo " id="T7:U60">12</span>)</span></span>; <span class="comment">% Colums 1:3 = roti, 4:6 = rotj, 7:9 = DELTA_roti, 10:12 = DELTA_rotj</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,13" id="srcline13">13</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,14" id="srcline14">14</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,15" id="srcline15">15</a></span><span class="line"><span class="keyword">if</span> (<span class="var type1" id="S13T28U101">par</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,16" id="srcline16">16</a></span><span class="line">    <span class="keyword">parfor</span> <span class="var type1" id="S16T7U104">i</span> = <span class="mxinfo " id="T32:U63">1:<span class="mxinfo " id="T7:U64">size(<span class="var type1" id="S2T1U109">EL</span>,1)</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,17" id="srcline17">17</a></span><span class="line">        [<span class="mxinfo " id="T6:U66"><span class="mxinfo " id="T35:U67"><span class="var type1" id="S2T1U116">EL</span>(<span class="var type1" id="S16T7U117">i</span>)</span>.el_in0</span>, <span class="mxinfo " id="T36:U70"><span class="var type1" id="S3T29U120">fint_i</span>(<span class="mxinfo " id="T37:U72">:</span>,<span class="var type1" id="S16T7U122">i</span>)</span>, <span class="mxinfo " id="T36:U74"><span class="var type1" id="S4T29U124">Fint_i</span>(<span class="mxinfo " id="T37:U76">:</span>,<span class="var type1" id="S16T7U126">i</span>)</span>, <span class="mxinfo " id="T36:U78"><span class="var type1" id="S5T29U128">dof_Fint</span>(<span class="mxinfo " id="T37:U80">:</span>,<span class="var type1" id="S16T7U130">i</span>)</span>, <span class="mxinfo " id="T38:U82"><span class="var type1" id="S6T30U132">Kel</span>(<span class="mxinfo " id="T39:U84">:</span>,<span class="var type1" id="S16T7U134">i</span>)</span>, <span class="mxinfo " id="T38:U86"><span class="var type1" id="S7T30U136">dof_i</span>(<span class="mxinfo " id="T39:U88">:</span>,<span class="var type1" id="S16T7U138">i</span>)</span>, <span class="mxinfo " id="T38:U90"><span class="var type1" id="S8T30U140">dof_j</span>(<span class="mxinfo " id="T39:U92">:</span>,<span class="var type1" id="S16T7U142">i</span>)</span>, <span class="mxinfo " id="T40:U94"><span class="var type1" id="S9T31U144">ROT</span>(<span class="var type1" id="S16T7U145">i</span>,<span class="mxinfo " id="T37:U97">:</span>)</span>, <span class="mxinfo " id="T7:U98"><span class="var type1" id="S10T32U148">break_iter</span>(<span class="var type1" id="S16T7U149">i</span>)</span>] = <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,18" id="srcline18">18</a></span><span class="line">            <span class="fcn" id="F1075N3:B151">assemble_body</span>( <span class="mxinfo " id="T8:U101"><span class="var type1" id="S11T33U153">con</span>(<span class="var type1" id="S16T7U154">i</span>,<span class="mxinfo " id="T41:U104">:</span>)</span>, <span class="mxinfo " id="T35:U105"><span class="var type1" id="S2T1U157">EL</span>(<span class="var type1" id="S16T7U158">i</span>)</span>, <span class="mxinfo " id="T42:U108"><span class="var type1" id="S12T34U160">U_input</span>(<span class="var type1" id="S16T7U161">i</span>,<span class="mxinfo " id="T37:U111">:</span>,<span class="mxinfo " id="T43:U112">:</span>)</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,19" id="srcline19">19</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,20" id="srcline20">20</a></span><span class="line"><span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,21" id="srcline21">21</a></span><span class="line">    <span class="keyword">for</span> <span class="var type1" id="S16T7U167">i</span> = <span class="mxinfo " id="T7:U114">1</span>:<span class="mxinfo " id="T7:U115">size(<span class="var type1" id="S2T1U172">EL</span>,1)</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,22" id="srcline22">22</a></span><span class="line">        [<span class="mxinfo " id="T6:U117"><span class="mxinfo " id="T35:U118"><span class="var type1" id="S2T1U179">EL</span>(<span class="var type1" id="S16T7U180">i</span>)</span>.el_in0</span>, <span class="mxinfo " id="T36:U121"><span class="var type1" id="S3T29U183">fint_i</span>(<span class="mxinfo " id="T37:U123">:</span>,<span class="var type1" id="S16T7U185">i</span>)</span>, <span class="mxinfo " id="T36:U125"><span class="var type1" id="S4T29U187">Fint_i</span>(<span class="mxinfo " id="T37:U127">:</span>,<span class="var type1" id="S16T7U189">i</span>)</span>, <span class="mxinfo " id="T36:U129"><span class="var type1" id="S5T29U191">dof_Fint</span>(<span class="mxinfo " id="T37:U131">:</span>,<span class="var type1" id="S16T7U193">i</span>)</span>, <span class="mxinfo " id="T38:U133"><span class="var type1" id="S6T30U195">Kel</span>(<span class="mxinfo " id="T39:U135">:</span>,<span class="var type1" id="S16T7U197">i</span>)</span>, <span class="mxinfo " id="T38:U137"><span class="var type1" id="S7T30U199">dof_i</span>(<span class="mxinfo " id="T39:U139">:</span>,<span class="var type1" id="S16T7U201">i</span>)</span>, <span class="mxinfo " id="T38:U141"><span class="var type1" id="S8T30U203">dof_j</span>(<span class="mxinfo " id="T39:U143">:</span>,<span class="var type1" id="S16T7U205">i</span>)</span>, <span class="mxinfo " id="T40:U145"><span class="var type1" id="S9T31U207">ROT</span>(<span class="var type1" id="S16T7U208">i</span>,<span class="mxinfo " id="T37:U148">:</span>)</span>, <span class="mxinfo " id="T7:U149"><span class="var type1" id="S10T32U211">break_iter</span>(<span class="var type1" id="S16T7U212">i</span>)</span>] = <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,23" id="srcline23">23</a></span><span class="line">            <span class="fcn" id="F1075N3:B214">assemble_body</span>( <span class="mxinfo " id="T8:U152"><span class="var type1" id="S11T33U216">con</span>(<span class="var type1" id="S16T7U217">i</span>,<span class="mxinfo " id="T41:U155">:</span>)</span>, <span class="mxinfo " id="T35:U156"><span class="var type1" id="S2T1U220">EL</span>(<span class="var type1" id="S16T7U221">i</span>)</span>, <span class="mxinfo " id="T42:U159"><span class="var type1" id="S12T34U223">U_input</span>(<span class="var type1" id="S16T7U224">i</span>,<span class="mxinfo " id="T37:U162">:</span>,<span class="mxinfo " id="T43:U163">:</span>)</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,24" id="srcline24">24</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,25" id="srcline25">25</a></span><span class="line"><span class="keyword"><span class="keyword">end</span></span></span></span>
</pre>
